# 免责声明

本白皮书中列出的信息具有初步性质。
因此，作者或他们各自的任何附属机构均不对此处列出的信息是最终的或正确的信息承担任何责任，并且在适用法律允许的最大范围内，上述每一项均不承担任何和所有责任，无论是由侵权引起的、合同或其他与本白皮书有关的内容。本白皮书或其中包含的任何内容均不得构成任何合同或承诺的基础或与之相关的依赖或作为订立任何合同或承诺的诱因。

本白皮书中的任何内容均不构成出售或招揽购买此处讨论的任何代币的要约。在任何情况下，如果本白皮书被视为此类要约或招揽，则本白皮书无意或传达此类要约或招揽在任何非法的司法管辖区。
因此，如果此类要约或招揽需要许可或注册，或者此类要约或招揽受到限制。特别是，本文讨论的任何尚未发布的代币，并且截至本白皮书发布之日，不打算根据任何司法管辖区的证券或类似法律进行注册，无论该司法管辖区是否认为此类代币是证券或类似工具，不得在任何司法管辖区发售或出售，如果这样做会构成违反该司法管辖区的相关法律。

# 执照

本文的源代码[^src]在 Creative Commons Attribution-ShareAlike 4.0 International[^cc]许可下获得。

[^src]: See: @sources
[^cc]: See: @cc


# 介绍

互联网主要由开源项目组成，并且从一开始就是这样。
随着时间的推移，其中许多项目已成为构建所有未来创新的基础。
虽然从中获得了财富，但开源主要是在没有补偿的情况下创建和维护的。

我们相信，依靠世界上最小比例的工程师在薪水或保持互联网运行之间做出选择，整个现代人类的努力都受到了阻碍。
开源是一种热爱的劳动，通常由于缺乏有意义的经济激励措施而受到阻碍，导致真正有价值的项目永远无法发挥其潜力，而其他项目则由于缺乏在整个生命周期内维护软件的激励措施而遭受安全问题。
为了充分发挥我们的潜力，我们需要一个公平的开源生态系统薪酬体系，它不会从根本上改变它的构建或使用方式。

企业通常围绕开源包装商业模式，直接从仁慈的开发人员的工作中获得收入，同时还依靠他们在问题发生时修复错误。一个很好的例子是最近发生的涉及 Log4j 中的一个严重安全漏洞的事件，Log4j 是 Apache 软件基金会的一个包，它使用在企业和政府使用的许多商业软件和服务中。 2021 年 11 月，阿里巴巴集团控股有限公司的一名安全研究员报告了 CVE-2021-44228漏洞[^1], 该漏洞获得了 Apache 软件基金会的最高评分。

Tenable 首席执行官兼美国计算机应急准备小组 (US-CERT) 的创始主任 Amit Yoran 描述了这个漏洞。这个漏洞被称为“过去十年中最大、最严重的”[^2]。

恐慌随之而来，维护这个 packages 的少数志愿者因失败而受到公开抨击。在以谦逊的公平请求解决了愤怒之后，系统得到了修补。企业和政府最终意识到，Log4j，一个被广泛的关键系统使用了 20 年的Package，是由一些无偿志愿者维护的，这些无名英雄尽管受到行业的滥用，但仍采取行动，并不知疲倦地努力解决漏洞.[^3] 。

可悲的是，Log4j 远非唯一的例子。 
core-js 每周被下载 3000 万次，作为每个 Node.js 应用程序的基础，但它也几乎没有资金支持。最近，几位比特币核心开发人员辞职，理由之一是他们的 *缺乏经济补偿* .

人们曾多次尝试提供奖励结构，通常涉及赞助和赏金制度。
赞助使开源消费者有可能向他们喜欢的项目捐款。
然而，把开源想象成一座砖砌的塔，底层早已被遗忘，但仍由敬业的工程师维护，并被更多的开发人员所依赖。
通常只有位于塔顶的项目才为人所知，并获得赞助。
这种有偏见的选择导致支撑塔的必需品不吸引捐款，而最受欢迎的人收到的捐款超过了他们的需要。
奖励允许项目的消费者提议向开发人员支付开发特定功能的费用，因此只对那些不一定符合他们最大利益的项目进行补偿。
同样，只奖励最喜欢的人。

在本文中，我们提出了Tea——一个基于开源开发者对整个生态系统的贡献，为他们公平支付报酬的去中心化系统，并通过应用于茶叶登记处所有条目的Tea激励算法制定。

![Simplified view of the tea steeping rewards system.](img/figure-1.svg)

$\parskip=0pt plus 1pt$

[^1]: Source: @nist
[^2]: Source: @reuters
[^3]: Source: @twitter


# 组件

构建应用程序的软件开发人员需要四样组件：浏览器、终端、编辑器和Package管理器。
在这四个中，Package管理器控制着开发人员构建产品所需的工具和框架。
这一层是我们看到改变开源报酬方式的潜力的地方。

## Package管理器

Package管理器知道应用程序依赖于哪些开源软件才能运行，从塔顶到其底部。
每个组件和对应用程序至关重要的版本是已知的并记录在案。它知道顶部塔楼的主体会仔细选择其依赖项，并且会继续进行仔细选择。
Package管理器独特地放置在开发人员工具堆栈中，以根据实际的实际使用情况实现自动化和精确的价值分配。

我们提出了一个不可变的去中心化注册表，旨在根据一种算法分配价值，该算法确定每个条目对系统效用和健康的贡献。
值可以在顶点（应用程序和基本库）进入图形，并递归地分发到这些顶点的依赖关系及其依赖关系，因为注册表知道整个开源图形。

此外，我们认为必须通过Package管理器获得材料信息，以便开发人员评估他们是否可以信任Package及其作者。此信息可能基于声誉、社区荣誉、去中心化身份(DID[^4])系统、其他Package管理器或可能依赖网络参与者将经济价值置于风险中的激励机制检索的数据。 

我们预测，Tea的工具、信息和奖励的组合将公平地激励开发人员，帮助刺激开源软件的增长和培育创新。

[^4]: See: @w3

## 去中心化登记处

每个Package管理器都有自己的注册表，重复复制相同的元数据。
是时候建立一个由依赖它的社区设计和管理的单一、全面和权威的注册表了。
这种去中心化、不可变的注册表可以提供安全性、稳定性并防止恶意意图。

互联网运行在数以万计的重要开源组件上。值得注意的是，到目前为止，由删除基本开源基础设施引起的事件很少。最著名的是在 2016 年移除了 NPM left-pad7 依赖项[^5]，
该依赖项级联到持续集成和持续部署系统，让开发人员数日无所事事。这一事件表明，互联网本身是建立在脆弱的发展系统之上的。其他例子包括包维护者主动或故意参与破坏他们流行的包（参见colors.js、faker.js faker.js[^6],和 node-ipc[^7]),或者通过假装帮助维护Package并破坏它们来窃取利润的不良行为者，例如例如，比特币私钥（参见 event-stream10[^8]),
或带有故意拼写错误的恶意包，也称为域名仿冒，以期诱骗用户安装它们，例如 crossenv与 cross-env NPM packages[^npmjsCrossenv].

随着行业朝着数字资产成为软件一部分的未来发展，需要保证软件的完整性。我们不能继续让自己容易受到修改软件的恶意行为者的攻击。
我们称之为Package管理器的大多数工具不能保证这些内置于应用程序和 dApp 中的包是其原始作者发布的未更改的开源代码。 Microsoft 的 GitHub 发现 17% 的软件漏洞是出于恶意目的而植入的 [^9], 其中一些漏洞在很长一段时间内未被发现（参见 Webmin 1.890[^10]).

由声誉系统增强并由旨在揭露不良行为者和奖励良好行为者的经济激励措施支持的分散式注册表可能提供开发人员社区一直在寻找的保证。


[^5]: Source: @theregister
[^6]: Source: @fossa
[^7]: Source: @lunasec
[^8]: Source: @github
[^npmjsCrossenv]: Source: @npmjsCrossenv
[^9]: Source: @zdnet
[^10]: Source: @threatpost


## 存储系统

开源软件Package提供了广泛的功能，其中一些可能受到限制或不需要。加密就是一个很好的例子。加密的一个关键用例是在全球范围内支持个人隐私。然而，加密也可用于不法目的（参见Phantom Secure，执法机构于2018年3月拆除）[^11]) 或可能被滥用以支持执法活动（参见 Ironside 行动 (AFP)、Greenlight 行动 (Europol) 和 Operation Trojan Shield (FBI)[^12] 其中 FBI 运营“加密”通信平台 AN0M，并说服犯罪分子使用他们的“加密”手机进行安全通信）。

加密的广泛应用使其成为开源软件的完美用例，并且是一个很好的例子，任何存储包的解决方案都必须是防篡改和抗审查的。
Tea 是一种去中心化协议，它不打算根据其功能过滤或制裁Package。
虽然 Tea 治理可能会选择删除已证实的恶意包（有关更多信息，请参阅治理部分），但 Tea 系统连接多个存储系统至关重要，包括证明Package未被更改且正确复制的去中心化存储系统。
Package维护者可以选择最适合他们需要的存储系统来安全地存储和分发他们的Package。

[^11]: Source: @fbi
[^12]: Source: @europol

# 网络参与者

tea 的使命是赋予开源社区权力，并确保他们的贡献者在创建构建互联网的工具时得到支持。
在本白皮书中，我们通过参与者的贡献来区分他们。有些人可能会贡献代码或验证贡献的代码。
其他人可能会提供经济价值来支持开发人员及其声誉。

## Package维护者

Package维护者必须确保他们的软件随着行业的发展继续提供不断增加的价值。

Tea 假设Package创建者维护他们的工作。
Package维护者是开源社区的支柱，他们需要因他们的持续贡献而获得授权和奖励。
Package维护者可能决定停止维护工作，或者意识到他们无法以符合包用户期望的速度运行。
Package维护者在完成提交时会收到一个不可替代令牌 (NFT)（有关更多详细信息，请参阅维护者 NFT 部分）。
该 NFT 用于证明他们的工作，并且是指导Tea奖励的关键。包的 NFT 持有者可以转让它的所有权属于另一个开发人员（或一组开发人员），从而使他们成为Package的维护者和任何未来奖励的接受者。

类似地，开发人员可以决定承担Package维护者的角色，通过分叉现有Package并提交,他们将继续维护的新包，从而成为Package创建者和维护者。
必须为开发人员社区提供正确的工具来确定正在维护的Package以及他们过去和现在的维护者的声誉和工作质量。我们经常看到开源工作被篡改，许多人的努力被坏人毁了。
尽管这些不良行为者的工作在很大程度上被发现和补救，但通常直到因财务或数据丢失而造成重大损失。
以 EventStream npm package为例[^13] ，当黑客设法渗透开源项目，获得其原作者的信任并将 EventStream 修改为依赖于恶意将比特币钱包凭证泄露到第三方服务器的Package。
尽管工具可能有助于检测其中一些攻击，但它们并不总是值得依赖的，这会创建一个依赖于彼此的勤奋和分享他们发现的意愿的整个社区。

我们建议通过Tea令牌部分中描述的Tea令牌引入激励措施，鼓励开源社区建设性地报告他们的发现，以便包维护者可以在它们被利用之前解决它们。

[^13]: Source: @medium

## Package用户

Package用户是专注于解决特定问题的软件开发人员。
他们经常在开源社区中寻找快速试验所需的工具，并以很少甚至免费的成本进行迭代，直接受益于Package创建者和维护者的工作。
传统上，一个子集可能选择通过捐赠或其他形式的报酬来支持包维护者；然而，这种情况很少发生。

赞助可以成为支持开源开发的有效系统；但是，报酬通常不会扩展到所有依赖项。这种限制有利于收藏但妨碍创新和软件构建。为了努力成为软件开发的基础，开源必须赋予所有开发人员，无论是初学者还是专家，跨越所有层。

Tea 的目的是维护开源软件的核心价值，同时提供一个去中心化的系统来奖励Package维护者的工作。为了实现这一使命，tea 打算开发——并激励其他人开发——Package用户支持Package维护者的机制通过NFT令牌的独特用例，如NFT令牌和未来工作和潜在的社区努力部分所述。

## Package支持者和赞助商

Web 2.0 和 web3 中，Package支持者通常被称为“赞助者”。他们是使用开源软件构建其商业产品的组织或Package用户、希望支持生态系统的慈善家或希望资助团队开发更大系统组件的企业家。

Tea建议将Package支持者社区扩展到整个Tea社区，无论是组织、开发人员、用户还是技术爱好者。
Tea 的目标是通过Tea 代币的独特用例实现去中心化激励机制，让 Tea 社区的任何成员为开源的永久可持续性和持续增长做出贡献。
Package支持者和赞助者可以根据他们的工作、信仰或任何会影响他们决定的标准和指标自由决定他们想要支持哪些包或包维护者。
此外，Package支持者和赞助商提供的支持将流向每个包的依赖项，从而隐含地信任包维护者对其堆栈做出良好选择，并使用此信息为他们的声誉做出贡献。

如果Package维护者提供此类服务，Package支持者和赞助商可能会获得高级支持级别的 NFT 作为回报，从而受益于加速的SLA 或更灵活的许可。
此外，Package支持者和赞助商可能会决定支持Package或Package维护者，并自动重定向他们的全部或部分奖励，以激励团队构建新的开源软件。
新生项目和更成熟的项目一样可以得到支持，进一步激励不断发展的开源环境。

## Tea评价者

随着新Package或现有Package的新版本的发布，需要证明工作的有效性。
此信息对于Package用户决定是否信任Package及其维护者至关重要。
使用Tea协议，此功能由Tea评价者提供。

ea评价者通常是经验丰富的软件开发人员，他们愿意花一些时间来检查Package相关的声明（功能、安全性、语义版本控制[^14],许可准确性等），
并用他们的声誉和经济价值来证明结果他们的研究和分析，并支持他们的评论。
Tea评价者因勤奋和努力而获得奖励。
在tea，我们将“泡茶”称为锁定Tea代币以支持您的评论并根据对您的评论有效性的共识获得奖励（或惩罚）的行为。

像Package支持者一样，品茶师可以影响Package和Package维护者的声誉。
然而，考虑到它们在验证Package的安全性、功能和质量方面的作用，它们的影响更为显着。
品茶者还需要建立自己的声誉来支持他们的主张。
他们的工作质量和他们在评估时冒着风险的经济价值与其他外部数据源相结合，将建立每位品茶师的声誉，为他们的工作带来更多价值。
有关用于影响包和包维护者声誉的机制的更多详细信息，请参阅Package信誉部分。

[^14]: See: @semver

# 协议概述

奖励开源贡献的协议设计面临挑战。
开源软件根据定义对所有人开放，因此可能会受到错误归属、盗用或恶意篡改。
然而，开源社区一直表现出它愿意突出好人和揭露坏人的意愿。从历史上看，审查和评论其他开发人员的贡献所花费的精力完全是自愿的，尽管报告和捍卫调查结果可能非常耗时且至关重要。

我们打算为由声誉和财务激励保护的应用程序创建一个无需信任的分发平台，因为我们认为，如果没有声誉系统和社区成员交流他们的发现和支持的能力（或异议）用于Package或开发人员的工作。

我们必须为开发人员提供工具来访问和贡献这个声誉系统。
包括对其Package中所有依赖项的版本和声誉的简单可视化和可编程访问的工具。
清楚地了解哪些社区成员支持每个Package以及他们正在锁定多少Tea代币将有助于每个Package的声誉，就像Package维护者锁定代币多少可以传达他们对工作的支持程度一样。
这些组合数据点将有助于为所有社区成员提供信誉系统并促进选择。
由于 EventStream Package黑客不是通过Package本身进行的，而是通过其依赖项之一进行的，因此所有依赖关系层的可见性对于构建这个无信任系统至关重要。
但是，在设计和构建系统时，需要优先考虑计算和交易（“gas”）成本等因素。

我们的目标是奖励 Web 2.0 和 web3 开发人员。
每个堆栈的复杂性和细节使得跟踪Package的安装和卸载很容易成为一个或多个不良行为者的受害者。
这包括“购买”装置以人为地夸大数字。更糟糕的情况是通过与许可证密钥或其他部署跟踪产生不必要的摩擦，对开源软件的性质进行根本性的改变机制。
为了提供最广泛的覆盖范围，我们认为奖励不能依赖于跟踪安装或卸载的简单概念，而应依赖于鼓励提交优质Package和报告恶意或高风险Package的激励机制。
最后，许多Package依赖于公共依赖项。例如，Lodash 有151,209名用户[^15] 而chalk 有 78,854名用户[^16]，或者 Log4js有 3,343 名用户[^17]。

随着越来越多的Package使用相同的依赖项创建，我们如何确保公平和公平地分配激励措施？我们如何确保最常用的依赖项得到奖励，而不会让新的或新兴的软件Package和开发人员挨饿？我们如何确保激励系统最终不会引导开发人员远离小众开发语言，将它们集中在激励更好的地方而且，作为开发人员，我们如何识别依赖最多的包来构建替代方案——这些包的更精简、更高效、编码更好的版本在tea，我们认为缺乏激励阻碍了开源软件的发展。
在正确的经济激励和奖励的支持下，更多的开发人员将能够构建、改进和增强开源软件，以造福世界。只有这样，Tea币才能代表开源软件的总价值。

[^15]: Source: @npmjsLodash
[^16]: Source: @npmjsChalk
[^17]: Source: @npmjsLogFourjs

## Package提交

Package发布的提交需要多个事务以原子方式发生。具体来说，包维护者必须：

* 向去中心化的注册表（及其语义版本）。
* 将Package上传到去中心化存储系统，以实现弹性、抗审查和易于分发。
* 通过锁定Tea令牌来提高Package的声誉和可信度。

这三个操作中的任何一个失败都将导致协议恢复到之前的状态，从而消除提交的任何证据。

成功提交Package后，Package维护者将收到维护者 NFT，以证明他们的工作和对开源的贡献。
Package维护者可以将与维护者 NFT 相关的锁定奖励转移给第三方。但是，与资产的创建和维护相关的声誉将保留在Package维护者手中，因此他们的声誉可能会随着时间的推移而受到影响。
随着茶社区的任何成员的声誉达到关键里程碑，他们可能会被授予访问协议的更高部分或获得加速奖励的权限，这由茶治理决定。
有关维护者 NFT 的更多详细信息，请参阅维护者 NFT 部分。

### 依赖分析

Package依赖关系可以深入运行，因为每个Package通常都有依赖关系和依赖项。
为了提供一种简单的方法来奖励所有为开源软件做出贡献的开发人员，同时保持依赖关系树的快速创建和计算效率，我们建议在提交Package时仅验证第一级依赖关系。

这种设计是基于这样的假设，即每个依赖项本身都是一个独立提交给茶树的包。这样做时，它的每个依赖项都可以被映射，如果它的依赖项本身有依赖项，那么这些依赖项将在提交依赖包时被映射。

![Dependencies analysis diagram.](img/figure-3.svg){#fig:dep-analysis}


在 @fig:dep-analysis, PackageA的提交触发了从运行时依赖1到n的分析，并构建从1到n的依赖，而运行时依赖1.1到1.N和构建依赖关系1.1到1。
在Package B提交时，n个样本被分析。我们将对激励分发采用相同的方法，因为质押令牌分布在所有依赖项上，因此递归地质押作为依赖项列出的Package (在 @fig:steeping-rewards).

![Steeping rewards distribution across dependencies.](img/figure-2.svg){#fig:steeping-rewards}


版本控制和冲突的依赖关系是重大挑战，对它们进行故障排除可能会耗费大量时间。为了解决这个问题，我们建议在提交时对每个Package进行全面的依赖扫描，以便我们可以确保Package符合以下语义版本范围规则。

* Package只能将它们的依赖关系限制在一个主要版本上，尽管范围的开始可以是任何有效的语义版本（例如，>=5.2.1 <6).
* 如果依赖项升级到更新的主要版本，tea 可能会要求增加Package的主要版本。
* 同样，如果依赖项升级到更新的次要版本，tea 可能会要求增加Package的次要版本。
* 如果添加了新的依赖项，tea 可能会要求增加Package的次要版本。

考虑到违反上述规则时对任何Package用户施加的不必要的努力，我们建议削减Package维护者质押的一部分茶代币，以反映他们是否尽职调查。
如果开发人员欺骗用户，就会有人丢失代币，由于依赖项扫描预计会在提交时进行，我们应该注意，不会发生在Package支持者和赞助商或质押者身上。

## Package和Package维护者的声誉

Package维护者必须通过质押Tea令牌来为其Package的声誉和可信度做出贡献。
然而，仅依赖作者经济贡献的声誉系统无法提供足够的用户保护，并且可能会受到 Sybil 攻击，包括个人自刷好评，从而欺骗用户相信他们的工作从而得到了许多人的审查和批准。

有几种方法可用于防止 Sybil 攻击，其中一些方法由 NitishBalachandran 和 Sugata Sanyal 在“缓解Sybil 攻击的技术回顾”中进行了描述。[^18].
由于茶是一种去中心化协议，使用依赖于中心化证书颁发机构的信任认证系统将违背其核心。
我们建议专注于减轻 Sybil 攻击的分散方法，更具体地说，关注依赖于大量网络参与者的方法，这些参与者受到激励来评估和公开代表每个Package及其维护者的声誉。

类似于POS区块链上的区块生产，非生产节点可以验证其他人的工作，并在必要时显示违反网络规则的行为，对不良行为者进行削减（销毁他们的一部分股权）的惩罚，我们提出了一个系统，第三方（又名Tea品尝者）将能够审查Package维护者生产的Package，并在经济上激励他们以开源的最佳利益行事软件社区及其用户以及认可良好行为并惩罚不良行为。
该系统必须既能抵抗 Sybil，又能防止大型代币持有者对协议或特定包的声誉产生重大影响。我们相信这种方法更符合开源，提供更肥沃的基质来促进采用和信任，并最终促进	Tea的发展。

[^18]: Source: @arxiv

## 第三方Package审查

第三方对Package的审查是建立声誉的重要组成部分，但是，第三方审查有其自己的一组独特威胁，包括上述的 Sybil 攻击。

区块链技术，以及更明确的质押，为Tea提供了应对这一挑战的独特机会。
虽然钱包地址可能无限量可用，但Tea代币并非如此，其初始供应量预计为 100 亿。
此外，开发人员执行的每个操作，例如提交包、验证包或质押它们，都将有助于他们的声誉，从而创建每个开发人员可以用来为茶社区做出贡献并参与茶治理的独特配置文件。

通过要求第三方审阅者质押茶代币并承担丢失部分质押代币的风险，如果他们的行为违背网络的利益或成为不良行为者，第三方可以为包裹提供额外的信任，并且以茶叶代币的形式获得奖励。

我们还建议将信誉系统扩展到对包装进行独立验证的第三方——品茶者。正面评价的完成将需要两个操作以原子方式发生：

* 提交代码审查，由品茶师签名，社区所有成员均可公开访问，以及
* 质押“支持”Package（与“反对”Package）的行为，以证实他们的评论

完成包含一个或多个严重漏洞的负面评论将要求品茶者首先使用消息传递协议联系Package维护者，以通知他们该漏洞并允许他们及时解决问题。
在分配给Package维护者以解决其漏洞的治理定义期限届满时或当更正的Package可用时，将使用相同的消息传递协议通知此Package的所有用户和测试者（包括依赖者）漏洞已被修复已识别并希望得到解决，因此他们知道要更新他们的应用程序或依赖项。
为了抑制浪费开发人员的时间，品茶师和Package维护者之间的沟通将要求品茶师质押Tea代币。

完成这两项操作后，品茶师将收到一份 NFT，作为他们在特定包装和包装版本上工作的证据。 
NFT 的积累与每个被审查的Package质押率和从外部系统提取的信息相结合，将为品茶师的声誉提供信息。
随着他们的声誉达到关键里程碑，品茶者可能会获得协议的更高部分或加速奖励，这由Tea治理决定。

## 过时或损坏的Package

tea 的使命是奖励开源社区的贡献者和参与者；然而，奖励必须与Package维护者和品茶者所付出的努力相称。
维护不足、过时或损坏的包清楚地表明包维护者没有达到社区的期望，或者没有提供通过包质押给他们留下的信任和支持。
过时Package的另一种表现可能是继续使用遗留语言或多版本语言的遗留版本。Package过时或损坏时间过长表明品茶者需要定期和一致地审查Package维护者的工作。

品茶师是开源社区的重要成员，因为他们的评论和相关声明可以引导Package用户接近或远离Package。
为了确保评论可以持续受到信任，我们提出了一种机制，让过时或损坏的包裹可能会看到他们质押过的代币的一部分被发送给最先意识到任何Package缺乏维护的品茶者。

任何概述了诸如漏洞或使用过时依赖项之类的缺陷并且在治理定义的宽限期之后保持开放的负面评论都应被视为Package维护者的失败。
他们没有完成他们被委托和奖励的任务。
对于Package的支持者和赞助商来说也是如此，他们将自己的声誉押在了拖欠的Package维护者的工作上并因此获得了奖励，但未能发现缺乏维护或选择继续支持该Package。

随着Package的普及和使用越来越多，越来越多的应用程序和潜在的关键任务系统依赖于它们，我们必须激励开发人员谨慎地向Package维护者和Package维护者报告缺陷在它们被利用之前解决这些缺陷。
因此，我们建议任何过时或损坏的Package受到一个或多个有证据的负面评论并在治理定义的宽限期后仍处于这种状态，无论其来源如何（Package维护者、Package支持者，赞助商或先前的品茶者），而另一部分则发送给提交负面评论的品茶者。
分配给所有品茶者的依据是他们的评论年龄和他们为评论质押的Tea代币数量。

## 维护者NFT

成功提交Package后，维护者将收到NFT 以证明他们的工作和贡献。
此 NFT 的持有者将自动获得与该Package相关的所有奖励。
Package维护者可以通过简单地转移NFT 将Package的维护所有权转移给另一个Package维护者。
NFT 的成功转移将导致新所有者自动获得未来的礼包奖励。

声誉建设的一个重要部分依赖于Package提交的频率和数量。
交付给包维护者作为其工作证据的 NFT 可能会被声誉系统用来更新包维护者的声誉，并允许他们访问协议的提升部分，这由Tea治理决定。
但是，为了防止攻击媒介，例如社区成员购买他们的声誉，维护者 NFT 的转移不会导致声誉的转移。声誉必须与特定开发人员的工作直接相关，并且不得转让。

# Tea代币

## 保护网络

虽然许多区块链可能看起来是有效且安全的基础设施解决方案，但我们认为必须仔细考虑构建Tea系统的技术堆栈。

可扩展性、成本效益、ESG 和第三方可扩展性是Tea选择PoS共识的重要设计考虑因素。
PoS共识中，节点运营商和网络参与者以链的原生代币的形式抵押经济价值，以提高系统的安全性。
节点运营商和网络参与者因成功生产符合网络规则并包含准确交易信息的区块而获得奖励。不活动（又名节点宕机）或恶意/不正确的活动会通过通过削减销毁一小部分质押代币来受到惩罚。

由Tea代币支持的PoS共识系统将允许Tea代币持有者
通过质押为系统的安全性做出贡献，并通过质押来支持开源开发人员。我们充分意识到经济因素可能会阻止一些开发商下注或质押茶；因此，只需一片叶子，即代表一亿分之一 ( $10^{-8}$ ) Tea代币的的最小面额，就可以进行转账和质押。

Tea代币的两种应用都在支持和发展开源生态系统方面发挥着重要作用。
质押Tea将确保Tea系统继续安全运行，因此所有网络参与者都可以提交和访问Package以对其进行审查，将它们集成到他们的应用程序中等。
相反，茶的质押将支持茶的目标，即为所有人提供工具，网络参与者支持和使用满足质量和可靠性要求的Package，这些Package由Tea社区决定每个Package的支持和反对。
对每个包裹持异议。在定义和实现时要非常小心固定和质押参数，这样一不会混淆两者。

## 奖励和惩罚

如前所述，不良行为者可能有强烈的动机来破坏开源软件。互联网的大多数关键基础设施都在开源上运行，寻找漏洞利用和其他漏洞的竞赛正在进行中。
在tea，我们认为Package维护者不应该受到指责（尽管他们经常受到指责）。

Tea协议奖励通过公平公正的奖励分配解决了这个问题。
像 Lodash 这样拥有超过 151k 依赖项的Package是开源开发的支柱，它的维护者应该得到相应的奖励。
然而，仅建立在受抚养人数量上的奖励制度将阻止创新者破坏这些垄断，除非他们有足够的第三方资助或已经积累了足够的资源来自筹资金。
这种方法可能会导致贡献者数量的减少，从而导致与Tea的含义截然相反的结果。

Tea的目标是代表开源软件的价值，为此，通过赋予其参与者所需的资源，促进其增长不受阻碍地追求自己的激情。Tea激励分配制度需要仔细考虑每个Package的质押率，并调整每个Package的质押率相应的激励。
为了减少风险，使用了少量的Package，由于许多应用程序之间的依赖关系收集了大部分的渗透为了获得奖励，我们将利用web3基金会的研究成果基于Polkadot股权证明的奖励机制。当一个Package超过最佳质押比率，其质押奖励比率将逐渐降低。
当包裹超过其最佳质押比率[^19] ，质押奖励比率将急剧下降，以抑制Package支持者和茶品尝者进一步质押高度质押率的Package。这种设计可以使质押较少的软件对支持者和品茶者都更具吸引力。
它还可能激励有经验的开发人员构建高质押率Package的替代品，为Tea社区创造机会，以平衡支持现有软件和促进创新。
质押比将在其初始设计中使用循环供应来计算。茶社区可能会改变这种设计，以进一步提高系统的可扩展性。
设 $\chi$ 是所有包的质押比。
它代表Package维护者、Package用户、Package支持者和赞助商以及质押者质押的茶代币总数除以茶代币总供应量。
考虑到今天有多少开源Package可用以及它们的预期增长， $\chi$ 将始终是一个介于 $0$ 和 $1$ 之间的非常小的值。

设 $\psi$ 为质押比率。
它代表任何网络参与者为保护网络而质押的茶代币总数。

设 $\chi_{ideal}$ 我们希望每个包在所有包及其依赖项之间公平分配奖励时达到的比率。
$\chi_{ideal}$ 的值必须随着新Package添加到去中心化注册表并创建依赖关系而更新。为了确定   $\chi_{ideal}$ 的最佳值，我们将使用在每个奖励周期开始时更新的实时曲线。

令 $\tau = \tau(\chi)$ 为分配给所有茶代币以支持开源开发者的茶社区成员的年质押利率。
换句话说， $\tau(\chi)$ 对应于社区成员在一年内获得的质押奖励，该社区成员在整个一年中质押Tea代币。

设 $\gamma = \gamma(\psi)$ 为分配给所有节点运营商和网络参与者的年度质押利率，这些节点运营商和网络参与者质押茶代币以保护网络。
换言之， $\gamma(\psi)$ 对应于一个社区成员在一年内获得的质押奖励，该社区成员质押了一整年的Tea代币。

设 $\delta$ 是针对网络金库的年度通货膨胀率。
$\delta$ 可能会随着外部因素影响代币供应而变化。
我们将年度质押奖励率视为 $\chi$ 的函数，将年度质押奖励率视为 $\psi$ 的函数。

* $\tau(\chi)$ 对应于人们质押包装的动机。
随着 $\chi$ 增加, 需要更少的奖励 $\tau(\chi)$ 。
* $\gamma(\psi)$ 对应于人们对网络进行质押的激励。
随着 $\psi$ 增加, 更少的奖励 $\gamma(\psi)$ 来保护网络.

年通货膨胀 $I$ 将等于 $(\tau + \gamma + \delta)$ 并且计算如下:

$$
I = \frac{\textrm{年末Token供应} - \textrm{年初Token供应}}{\textrm{今年年初的代币供应 }} = (\tau + \gamma + \delta)
$$

应权衡 $\tau_{\textsc{all}}$ （分配给所有包的激励）和 $\gamma_{\textsc{all}}$ （分配给网络安全的所有贡献者的激励）对通胀的贡献，以确保系统激励最佳Package/质押比率。

当我们关注分布在所有激励措施时，我们应注意到
$\tau_{\textsc{all}}$
是Package比率 $\chi$ 的函数，因此
$\tau_{\textsc{all}}(\chi) = \chi \cdot \tau(\chi)$.
从我们之前的分析可以看出
$\tau_{\textsc{all}}(\chi_{ideal}) = \chi_{ideal} \cdot \tau_{ideal}$.
由于达到了这种状态
$\chi = \chi_{ideal}$
, 因此奖励在
$\tau_{ideal}(\chi)$
此处最大

令  $\tau_{ideal} = \tau(\chi_{ideal})$
为网络在 $\chi = \chi_{ideal}$ 的理想场景下提供的奖励率。

令  $\tau_{0}$ 为  $\tau_{\textsc{all}}(\chi)$ 的极限，当茶叶社区的任何成员都没有质押任何软件时， $\chi$ 变为零。
 $\tau_{0}$ 的值应接近于零但不为零以激励早期采用者。
根据 web3 基金会的研究建议，我们建议：

* 膨胀函数在 $\chi = 0$ 和 $\chi = \chi_{ideal}$ 之间线性增长，并且
它在 $\chi = \chi_{ideal}$ 和 $\chi = 1$ 之间呈指数衰减。

我们为 $\tau_{\textsc{all}}(\chi)$ 选择了类似的指数下降，因为它意味着 $\tau(\chi)$ 的指数下降，并且我们希望奖励急剧下降到 $\chi_{ideal}$ 之外，以防止单个Package收到所有奖励。

衰减的定义是通货膨胀率最多下降50%当 $\chi$ 向 $d$ 右边移动了 $\chi_{ideal}$ – i.e.
$\tau_{\textsc{all}}(\chi_{ideal} + d) \geq \tau_{\textsc{all}} \cdot 0.5$.

我们提出了以下利率和通货膨胀率函数，它们取决于参数  $\chi_{ideal}$, $\tau_{ideal}$, $\tau_{0}$ 和 $d$.

\begin{align*}
&\tau_{\textsc{all}}(\chi) = \tau_{0} + (\tau_{\textsc{all}}(\chi_{ideal}) - \tau_{0})\frac{\chi}{\chi_{ideal}}\enspace\textrm{for}\;0 < \chi \leq \chi_{ideal} \\
&\tau_{\textsc{all}}(\chi) = \tau_{0} + (\tau_{\textsc{all}}(\chi_{ideal}) - \tau_{0}) \cdot 2^{(\chi_{ideal}-\chi)/d}\enspace\textrm{for}\;\chi_{ideal} < \chi \leq 1
\end{align*}

正如优秀的演员需要得到奖励一样；不良行为者需要被查明并受到惩罚。
开源软件为不良行为者提供了许多机会，为整个开发人员社区制造痛点和声誉风险。
从盗用工作到更改和重新分发Package，或者注入恶意代码，好人和坏人之间的战争仍在继续，通常是资金充足的坏人将开源Package的污染视为机会在经济上受益。
不利的一面相对较小，Package可能被禁止在数字货架上或声誉不佳。

我们建议引入一种削减机制，以建立直接影响不良行为者经济价值的更实质性的不利因素。
分析新提交的Package中的代码，我们建议品茶者接收工具和激励措施来查明和突出恶意代码，以便Package用户可以意识到风险，Package维护者、支持者和赞助商会因提交或支持而受到惩罚恶意代码。
在这种情况下，对于根据网络规则执行的所有有证据的负面评论，并且已经由Package维护者在治理定义的期限内解决，维护者不应受到与支持者和赞助商或茶品尝者相反的任何惩罚。
对相关Package进行了正面评价。对于根据网络规则执行的负面评论并且维护者未在治理定义的期限内解决，维护者、支持者和赞助商以及以前的品茶者所持有的一小部分代币将被削减。
另一部分将被锁定在由Tea治理控制的保险池中。Tea治理将与社区密切合作制定政策和规则，将池中的内容分发给受漏洞影响的人。该协议将根据他们“反对”包裹质押的Tea代币的数量以及他们的代币质押的时间，将三分之一的质押代币分配给所有对负面评论做出贡献并质押在包裹中的茶品尝者。
换句话说，一个或多个品茶者越早根据网络规则识别并报告缺陷，他们支持安全和高效的开源开发的奖励就越高。

为了防止社区成员随机投票“反对”希望获得大部分惩罚的高质押Package，所有“反对”质押的Tea代币都不会获得通货膨胀奖励，并且可能会受到衰减机制的影响，从而随着时间的推移降低其价值。

[^19]: Source: @web3


# 治理

治理对于任何分布式系统的开发、可持续性和采用都至关重要。

我们建议Tea包括链上治理，所有Tea代币持有者都可以建议和投票改变由代币所有权和声誉加权的关键参数。
这些参数可能包括通货膨胀、交易费用、赌注奖励、质押奖励或最佳质押比率。此功能将确保关键参数可以随着时间的推移由Tea社区成员发展和优化。
我们预计治理将以简单的结构启动，并随着Tea系统的成熟而逐步扩展，促进采用并确保逐步去中心化。

一些系统参数可能不受治理或支持高频更改以减少治理所代表的攻击面。
参数向开放、去中心化治理的逐步过渡将确保系统的稳定性和可预测性。


# 第三方可扩展性

当我们构建初始工具以激发开源社区的长期支持时，我们相信我们的部分使命是确保第三方可以扩展整个工具集。
除了为开发人员提供构建协议扩展的基础设施，包括创新的新方法和进一步支持开源开发人员之外，我们的计划还包括其他包管理器为协议做出贡献的潜力。
开源开发人员的梦想和努力打造了支持我们日常生活的创新。我们期待发现Tea社区提出的Tea的新用途和扩展。

# 未来的工作和潜在的社区努力

随着Tea系统的成熟，我们预计社区将通过治理来决定并为茶系统的改变和扩展做出贡献。以下是我们认为可能会激发一些灵感的一些想法。

## Tea交易者

开源软件社区充满活力，不断寻求创新和创造价值。
这种奉献精神和利他主义导致不断构建新的软件和Package，每一个都拉动依赖关系。因此，我们预计依赖关系图会不断发展，从而导致质押比率和奖励的频繁变化。
未来，Tea社区可能会提议开发一个系统，该系统旨在动态监控每个Package的质押率，并重新平衡支持者如何根据自己的标准质押代币。

## Package转让特许权的使用费

我们认识到，Package维护者可能会决定将他们的丰厚奖励流转移给一位或多位开发人员。
这种转移的治理必须由包维护者及其合作伙伴决定，不受Tea的干扰。
需要提供工具以使此类转移是全部或部分的（可能通过仅将一部分质押奖励重定向给一个或多个开发人员，而剩余的奖励继续流向原始包维护者）和质押奖励流经由单个网络参与者、多个网络参与者控制的单个帐户，或使用静态或动态比率自动分布在多个帐户中。

## 跨多个维护者的奖励分配

一个Package的维护可以依赖于另外一个开发团队的工作。
在质押奖励开始流动之前，团队应该考虑在他们之间自动分配质押奖励。
如何分配必须由维护者自己决定，因为他们最有能力评估谁做出了贡献以及应该如何奖励他们。

为此，每个团队（或多个团队）可以建立自己的去中心化自治组织（DAO），并自动分配奖励或部署更复杂的系统，以根据外部因素（例如所有 DAO 的投票）确定适当的奖励分配成员，或基于持续贡献、成功完成赏金等的基于时间的分配。

## 处理Package“分叉”

我们认为分叉是必不可少的，而且在很大程度上没有得到充分利用。分叉 可以成为开发在功能、性能、安全性甚至注意力方面竞争的Package的有效工具。尽管它们可能有用，但分叉必须承认最初的努力。通过未来的工作或潜在的贡献，Tea社区可能会增强系统以要求声明分叉，甚至可能在提交Package时检测到。品茶师透露的未申报分叉可能会导致部分质押过的代币被削减，转移给原始Package包装维护者，并发送给暴露分叉的品茶师。

## 运行VS构建依赖项

在分配Package质押奖励时，Tea 可能无法区分构建依赖项和运行时依赖项。
然而，如果Tea社区对做出这样的区分有强烈的感觉，Tea社区可能会建议对质押奖励分配算法进行增强，以说明每个依赖项的重要性以及它们对依赖它们的Package的价值的贡献。
这些提案将根据社区的决定进行投票和实施。

## 基于使用的报酬

随着越来越多的应用程序是使用在 tea 注册的Package构建的，社区可能会增加奖励算法，以便分配可能受到外部证明数据集（例如使用情况）的影响。
奖励机制的这种更新可以允许更高的Tea代币奖励分配流向使用率最高的Package，同时仍然尊重Tea代币部分中描述的质押比率的限制。
Package维护者可以使用类似的方法根据他们选择的透明逻辑在他们的依赖项之间分配质押的奖励。
请注意，所有用于影响Tea系统中跨Package和依赖项的奖励分配需要可证明是可靠的。


# 致谢

这份白皮书的存在离不开众多茶友的支持和奉献。
作者要感谢 Josh Kruger、Jadid Khan 和 Jacob Heider 对代币经济学的贡献，以及许多自愿花时间就本文档内容提供反馈的谨慎个人。

$\parskip=0pt plus 1pt$

# 专业术语

| 术语 | 定义 |
|------|------------|
| Leaf | 最小面额的茶叶代币，一片叶子相当于一亿分之一 ($10^{-8}$) 的茶代币。 |
| Slashing | 惩罚违反网络规则的行为的措施 |
| Staking | 锁定茶叶代币以保护构建茶叶系统的权益证明网络的行动。 |
| Steeping | 锁定茶叶代币以支持您的主张并根据对您主张的有效性的共识获得奖励（或惩罚）的行为。 |


# 参考文献
